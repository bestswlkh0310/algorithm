I = lambda: [*map(int, input().split())]
h, w = I()
g = [I() for _ in range(h)]
a = [
    ((0, 1), (0, 2), (0, 3)),
    ((1, 0), (2, 0), (3, 0)),

    ((0, 1), (1, 1), (1, 0)),

    ((0, 1), (0, 2), (1, 0)),
    ((0, 1), (0, 2), (-1, 0)),
    ((0, 1), (0, 2), (1, 2)),
    ((0, 1), (0, 2), (-1, 2)),
    ((0, 1), (1, 0), (2, 0)),
    ((0, -1), (1, 0), (2, 0)),
    ((2, 1), (1, 0), (2, 0)),
    ((2, -1), (1, 0), (2, 0)),

    ((0, 1), (1, 1), (1, 2)),
    ((0, 1), (-1, 1), (-1, 2)),
    ((1, 0), (1, 1), (2, 1)),
    ((1, 0), (1, -1), (2, -1)),

    ((0, 1), (0, 2), (-1, 1)),
    ((0, 1), (0, 2), (1, 1)),
    ((1, 0), (2, 0), (1, 1)),
    ((1, 0), (2, 0), (1, -1))
]

mx = 0

for k in a:
    for i in range(h):
        for j in range(w):
            tempSum = g[i][j]
            t = True
            for e in k:
                y, x = e
                y1 = y + i
                x1 = x + j
                if 0 <= y1 < h and 0 <= x1 < w:
                    tempSum += g[y1][x1]
                else:
                    t = False
                    break
            if t:
                mx = max(tempSum, mx)

print(mx)